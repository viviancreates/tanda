 <div class="container user-show-page mt-4">
  <h1>
    <i class="fa fa-user-circle"></i> <%= @user.username %>
  </h1>

<p>Your Wallet Address: <%= current_user.default_address %></p>
<p>Send ETH to this address to fund your wallet.</p>

  <%= button_to "Follow", follow_requests_path(follow_request: { recipient_id: @user.id }), method: :post, class: "btn btn-primary" %>

  <div class="card mb-4">
    <div class="card-header">
      <h4><i class="fa fa-info-circle"></i> User Info</h4>
    </div>
    <div class="card-body">
      <p><strong>Name:</strong> <%= [@user.first_name, @user.last_name].compact.join(" ") %></p>
      <p><strong>Email:</strong> <%= @user.email %></p>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">
      <h4><i class="fa fa-users"></i> Your Tandas</h4>
    </div>
    <div class="card-body">
      <% if @tandas.any? %>
        <ul class="list-group">
          <% @tandas.each do |tanda| %>
            <li class="list-group-item">
              <i class="fa fa-piggy-bank"></i> 
              <%= link_to tanda.name, tanda_path(tanda), class: "text-decoration-none" %>
              - Goal: $<%= tanda.goal_amount %>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p>No tandas created yet.</p>
      <% end %>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">
      <h4 class="mb-0"><i class="fa fa-wallet"></i> Your Transactions</h4>
    </div>
    <div class="card-body">
      <% if @transactions.any? %>
        <table class="table">
          <thead>
            <tr>
              <th>Description</th>
              <th>Amount</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody>
            <% @transactions.each do |transaction| %>
              <tr>
                <td><i class="fa fa-tag"></i> <%= transaction.description %></td>
                <td>$<%= transaction.amount %></td>
                <td><%= transaction.date.strftime("%B %d, %Y") %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p>No transactions yet.</p>
      <% end %>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">
      <h4><i class="fa fa-users"></i> Connections</h4>
    </div>
    <div class="card-body">
      <% if @connections.any? %>
        <ul class="list-group">
          <% @connections.each do |connection| %>
            <li class="list-group-item">
              <i class="fa fa-user-circle"></i> 
              <%= connection.username %>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p>No connections yet.</p>
      <% end %>
    </div>
  </div>
<div>
 <h2>Wallet Information</h2>
  <% if current_user.wallet_data.present? %>
    <p><strong>Wallet ID:</strong> <%= current_user.wallet_data['wallet_id'] %></p>
    <p><strong>Balance:</strong> <%= current_user.balance %> ETH</p>
    <%= button_to "Fund Wallet", fund_wallet_path(current_user.id), method: :post %>
  <% else %>
    <p>No wallet found. Create one now:</p>
    <%= button_to "Create Wallet", create_wallet_path(current_user.id), method: :post %>
  <% end %>
</div>
</div>

<h3>Transfer Funds</h3>
<%= form_with url: transfer_wallet_path(current_user.id), method: :post, local: true do |f| %>
  <div class="mb-3">
    <%= f.label :recipient_address, "Recipient Wallet Address", class: "form-label" %>
    <%= f.text_field :recipient_address, class: "form-control", required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :amount, "Amount", class: "form-label" %>
    <%= f.number_field :amount, class: "form-control", step: 0.00001, required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :currency, "Currency", class: "form-label" %>
    <%= f.select :currency, options_for_select([["ETH", :eth], ["USDC", :usdc]]), {}, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= f.submit "Send Funds", class: "btn btn-primary" %>
  </div>
<% end %>
